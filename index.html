<!DOCTYPE HTML>

<html>

<title>DOThtml</title>

<!-- <link rel="stylesheet" type="text/css" href="styles/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="styles/bootstrap-theme.min.css"> -->
<link rel="stylesheet" type="text/css" href="/styles/dothtml.ui.css">
<link rel="stylesheet" type="text/css" href="/styles/prettify.css">
<link rel="stylesheet" type="text/css" href="/styles/style.css">
<link rel="stylesheet" type="text/css" href="/pages/pagestyles.css">
<link rel="stylesheet" type="text/css" href="/styles/documentationstyles.css">
<link rel="stylesheet" type="text/css" href="/styles/highlight-default.css">

<script src="/scripts/custom-polyfill.js"></script>
<script src="/scripts/jquery.js"></script>
<!-- <script src="scripts/bootstrap.min.js"></script> -->
<script src="/scripts/dothtml.js"></script>
<script src="/scripts/dotcss.js"></script>
<script src="/scripts/components.js"></script>
<script src="/scripts/dothtml.ui.js"></script>
<script src="/scripts/beautify-html.js"></script>
<script src="/scripts/showdown.js"></script>
<script src="/scripts/highlight.pack.js"></script>
<script src="/scripts/dothtml.js"></script>
<script src="/scripts/logoapi.js"></script>
<script src="/scripts/dothtmllogo.js"></script>
<!-- <script src="/scripts/js-beautify.js"></script> -->

<style>
	.blue-italics{
		color: blue;
		font-style: italic;
	}
	.e1btn{
		padding: 5px;
	}
</style>

<body>

	<script>
		
		// function beautifyHtml(source) {
		
		// 	var opts = {};
		
		// 	opts.indent_size = 2;
		// 	opts.indent_char = " ";
		// 	opts.max_preserve_newlines = "0"; //Change to -1 to remove all new lines.
		// 	opts.preserve_newlines = opts.max_preserve_newlines !== "-1";
		// 	opts.keep_array_indentation = false;
		// 	opts.break_chained_methods = false;
		// 	opts.indent_scripts = "normal";
		// 	opts.brace_style = "collapse";
		// 	opts.space_before_conditional = true;
		// 	opts.unescape_strings = false;
		// 	opts.jslint_happy = false; //Don't know what this is.
		// 	opts.end_with_newline = false;
		// 	opts.wrap_line_length = 30; //Numb chars before line wrap. 0 = no wrap.
		// 	opts.indent_inner_html = false;
		// 	opts.comma_first = false;
		// 	opts.e4x = false;
			
		// 	var source2 = "";
			
		// 	for(var i = 0; i < source.length; i++){
		// 		switch(source[i]){
		// 			case "<":
		// 				source2 += "\r\n";
		// 				source2 += source[i];
		// 				break;
		// 			case ">":
		// 				source2 += source[i];
		// 				source2 += "\r\n";
		// 				break;
		// 			default: 
		// 				source2 += source[i];
		// 				break;
		// 		}
		// 	}
			
		// 	return html_beautify(source2, opts);
		// }
		
		//Define a bunch of widgets that will be used in examples.
		
		// dot.component ("robotface", function(id, color){
		// 	return dot.div(dot
		// 		.div().style(dotcss.position("absolute").width(10).height(10).left(10).top(10).backgroundColor(0))
		// 		.div().style(dotcss.position("absolute").width(10).height(10).left(10).top(10).backgroundColor(0))
		// 		.div().style(dotcss.position("absolute").width(48).height(5).left(8).top(48).backgroundColor(0))
		// 		.div().style(dotcss.position("absolute").width(64).height(64).display("InlineBlock").backgroundColor(color))
		// 	).id(id).style(dotcss.position("relative").width(64).height(64).backgroundColor(color).display("InlineBlock"));
		// });
		
		dot.component("featurepreview", function(imageurl, title){
			return dot.div(
				dot.div().class("featurepreview-img")
					.style(dotcss.backgroundImage(imageurl))
				.div(title).class("featurepreview-title")
			).class("featurepreview");
		});
		
		dot.component("showcasesite", function(title, url, preview){
			return dot
				.div()
				.title(title)
				.onclick(function(){
					window.open(url);
				})
				.style(
					dotcss
					.display("inline-block")
					.verticalAlign("bottom")
					.width(200)
					.height(200)
					.backgroundImage(preview)
					.backgroundSize(200)
					.cursor("pointer")
				);
		});
		
		var allBoxes = [];
		var dragging = false;
		
		dot.component("navbutton", function(title, path){
			return dot.a(title).class("tab-button-container")
			.id("tab-button-" + (path.substring(1) || "home")).href(path)
			.onclick(function(e){
				e.preventDefault();
				dot.navigate(path);
				$(".tab-button-container").removeClass("selected");
				$(e.target).addClass("selected");
			});
		});
		
		dot.component("headergridsquare", function(x, y, row){
			row.push(this);
			this.left = null;
			this.right = null;
			this.above = null;
			this.below = null;
			var avgWeight = 1;
			var avgR = 0;
			var avgG = 0;
			var avgB = 0;
			if(x != 0){
				this.left = allBoxes[y][x-1];
				allBoxes[y][x-1].right = this;
				avgWeight++;
				avgR += allBoxes[y][x-1].rT;
				avgG += allBoxes[y][x-1].gT;
				avgB += allBoxes[y][x-1].bT;
			}
			if(y != 0){
				this.above = allBoxes[y-1][x];
				allBoxes[y-1][x].below = this;
				avgWeight++
				avgR += allBoxes[y-1][x].rT;
				avgG += allBoxes[y-1][x].gT;
				avgB += allBoxes[y-1][x].bT;
			}
			avgR += (100 + Math.random() * 25);
			avgG += (100 + Math.random() * 100);
			avgB += (200 + Math.random() * 55);
			this.rT = avgR / avgWeight;
			this.gT = avgG / avgWeight;
			this.bT = avgB / avgWeight;
			this.r = this.rT / 2;
			this.g = this.gT / 2;
			this.b = this.bT / 2;
			var self = this;
			return dot.div().style(dotcss.position("absolute").leftP(100 * x / 20).topP(100 * y / 10).widthP(5.01).heightP(10.01).backgroundColor(this.r,this.g,this.b))
			.onmousedown(function(){
				dragging = true;
			}).onmouseup(function(){
				dragging = false;
			})
			.onmouseover(function(){
				if(dragging){
					self.rT = 200 + Math.random() * 55;
					self.gT = 100 + Math.random() * 55;
					self.bT = 100 + Math.random() * 55;
				}
				else{
					self.rT = 200 + Math.random() * 55;
					self.gT = 200 + Math.random() * 55;
					self.bT = 200 + Math.random() * 55;
				}
			});
		});
		
		dot.component("headergrid", function(){
			return dot.div(dot.iterate(10, function(y){
				var row = [];
				allBoxes.push(row);
				return dot.iterate(20, function(x){
					return dot.headergridsquare(x, y, row);
				})
			})).id("header-grid").style(dotcss.position("absolute").top(0).left(0).width(1600).height(400));
		});
		
		dot.globalExampleNumber = 0; //Note: storing global widget vars inside dot is possible, but isn't standardized by any means.
		dot.component("featuretutorial", function(title, description, innerDotFunction, afterNotes){
			var exampleNumb = dot.globalExampleNumber;
			var innerDotFunctionStr = innerDotFunction.toString();
			dot.globalExampleNumber++;
			return dot
			.div(
				dot.h3(title)
				.p(description).style(dotcss.padding(2))
				.a("Run example").type("button").style(dotcss.padding(2).color(0xFFFFFF).fontWeight("bold").backgroundColor(0x7799DD).borderRadius(3))
				.onclick(function(event){
					//Empty first. Even though rendering can typically happen right after empty(), 
					//the very first example renders to the target early, meaning the empty will
					//delete the child nodes as soon as it's called (for that example).
					dot("#example" + exampleNumb + "htmlout").empty();
					dot("#example" + exampleNumb + "output").empty(); 
					var result = innerDotFunction();
					//console.log(result);
					dot("#example" + exampleNumb + "htmlout").pre(dot.t(beautifyHtml(result.toString())));
					dot("#example" + exampleNumb + "output").h(result);
				})
				.div(
					dot
					.div(
						dot.pre(dot.t(innerDotFunctionStr.substring(20, innerDotFunctionStr.length - 2))).class("prettyprint linenums")
					).style(dotcss.display("inline-block").whiteSpace("normal").verticalAlign("top").widthP(50).padding(2))
					.div().id("example" + exampleNumb + "htmlout").style(dotcss.display("inline-block").whiteSpace("normal").verticalAlign("top").widthP(25).padding(2))
					.div().id("example" + exampleNumb + "output").style(dotcss.display("inline-block").whiteSpace("normal").verticalAlign("top").widthP(25).padding(2))
				).style(dotcss.widthP(100).whiteSpace("nowrap"))
				.if(afterNotes, dot.p(afterNotes).style(dotcss.padding(2)))
			).style(dotcss.widthP(100).border("2px solid black").padding(2));
		});
		
		dot("body")
		.div(
			dot.headergrid()
			.div().id("logo-container").style(dotcss.position("relative").height(400)).style("pointer-events:none;")
		).id("header")
		.div(
			dot.navbutton("Home", "/")
			//.navbutton("Getting Started", "/gettingstarted")
			.navbutton("Documentation", "/documentation")
		)
		.router({
			routes: [
				{title: "DOThtml", 			path: "/", 					component: "/pages/main.js"},
				//{title: "Getting Started", 	path: "gettingstarted", 	component: "/pages/gettingstarted.js"},
				{title: "Documentation", 	path: "documentation", 		component: "/pages/documentation.js"},
				{title: "Documentation", 	path: "documentation/*", 	component: "/pages/documentation.js"},
				{title: "License", 			path: "license", 			component: "/pages/license.js"},
				{title: "Page Not Found", 	path: "*", 					component: function(){return dot.h1("NOT FOUND!")}},
			],
			onNavigateInit: function(navParams){
				$(".documentation-doclink.active").removeClass("active");
				var root = navParams.path.split("/")[1] || "home";
				$(".tab-button-container.selected").removeClass("selected");
				$("#tab-button-" + root).addClass("selected");
			},
			onComplete: function(){
				windowResize();
			}
		}).class("container").id("main-router")
		.div(
			dot.table(
				dot.tr(dot.td(dot.div("DOThtml").style(dotcss.fontSize(28).marginBottom(100)))).colspan(2)
				.tr(
					dot.td(dot.a("License").href("/license").onclick(function(e){e.preventDefault();dot.navigate("/license")}))
					.td(dot.a("DOTcss").href("http://jsideris.com/DOTcss"))
					.td("&copy;" + new Date().getFullYear() + " - Joshua Sideris")
				)
			).style(dotcss.position("absolute").bottom(0).widthP(100))
			//dot.div("&copy;" + new Date().getFullYear() + " - Joshua Sideris").style(dotcss.position("absolute").right(10).bottom(10).color(0x9638527).lineHeight(20))
		).id("footer");
		
		function animate(){
			requestAnimationFrame(animate);
			for(var y = 0; y < allBoxes.length; y++){
				var row = allBoxes[y];
				for(var x = 0; x < row.length; x++){
					var c = row[x];
					
					if(Math.random() < 0.0005){
						// c.r = 200 + Math.random() * 55;
						// c.g = 200 + Math.random() * 55;
						// c.b = 200 + Math.random() * 55;
		
						c.rT = (100 + Math.random() * 25) * 10;
						c.gT = (100 + Math.random() * 100) * 10;
						c.bT = (200 + Math.random() * 55) * 10;
					}
		
					var avgNumb = 1 + (c.left ? 1 : 0) + (c.right ? 1 : 0) + (c.above ? 1 : 0) + (c.below ? 1 : 0);
					var avgR = (c.rT + (c.left ? c.left.r : 0) + (c.right ? c.right.r : 0) + (c.above ? c.above.r : 0) + (c.below ? c.below.r : 0)) / avgNumb;
					var avgG = (c.gT + (c.left ? c.left.g : 0) + (c.right ? c.right.g : 0) + (c.above ? c.above.g : 0) + (c.below ? c.below.g : 0)) / avgNumb;
					var avgB = (c.bT + (c.left ? c.left.b : 0) + (c.right ? c.right.b : 0) + (c.above ? c.above.b : 0) + (c.below ? c.below.b : 0)) / avgNumb;
					var influence = Math.random() * 0.05;
					c.rT += (avgR - c.rT) * influence;
					c.gT += (avgG - c.gT) * influence;
					c.bT += (avgB - c.bT) * influence;
					
					influence = Math.random() * 0.02;
					c.r += (c.rT - c.r) * influence;
					c.g += (c.gT - c.g) * influence;
					c.b += (c.bT - c.b) * influence;
		
					if(c.r > 255 || c.g > 255 || c.b > 255){
						c.rT /= 8;
						c.gT /= 8;
						c.bT /= 8;
					}
		
					dotcss(c.element).backgroundColor(c.r, c.g, c.b);
				}
			}
		}
		
		requestAnimationFrame(animate);

		var bigLogo = dothtmlLogo("#logo-container");
		bigLogo.play(); 
		
		function windowResize(){
			// Logo Stuff
			var h = 400;
			if(window.location.pathname != "/" && window.location.pathname != "") h = 60;
			else if(window.innerWidth < 600) h = window.innerWidth * 2 / 3;
			dotcss("#logo-container").height(h);
			if(window.innerWidth > 2 * h+50) dotcss("#header-grid").width(window.innerWidth).height(window.innerWidth / 2);
			else dotcss("#header-grid").width((h + 50) * 2).height(h + 50);
			bigLogo.resize();

			// Documentation menu.

			if(window.innerWidth > 600){
				dotcss("#documentation-container").width(window.innerWidth - 320).display("inline-block");
				dotcss("#documentation-directory").show().width(300).height(Math.max(window.innerHeight-200, 600)).display("inline-block");
				dotcss(".show-pages-btn").hide();
				dotcss(".close-pages-btn").hide();
			}
			else{
				dotcss("#documentation-container").width(window.innerWidth).display("inline-block");
				dotcss("#documentation-directory").widthP(100).height(Math.max(window.innerHeight-200, 600)).display("inline-block").hide();
				dotcss(".show-pages-btn").show();
				dotcss(".close-pages-btn").show();

			}
		};

		window.onresize = windowResize;
		windowResize();
		//setTimeout(windowResize);
		
		//dot.navigate("/", true);
		</script>
</body>

<!-- <script type="text/javascript" src="/scripts/run_prettify.js"></script> -->
</html>